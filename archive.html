{%- extends 'layout.html' -%}

{%- block html_head -%}
<!--仅在首页和文章页面加载语法高亮和katex-->
<script src="https://cdn.jsdelivr.net/npm/prismjs@latest/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@latest/plugins/autoloader/prism-autoloader.min.js"></script>
{%- if theme_ctx.prism_theme -%}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism{{- '-' ~ theme_ctx.prism_theme -}}.min.css">
{%- else -%}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism.min.css">
{%- endif -%}
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
{%- endblock -%}

{%- block site_title -%}
{{- archive.title -}}
{%- endblock -%}

{%- block main_content -%}
<div class="container">
    <h1 class="text-console">
        <p class="text-center"><img src="{{ 'static/fonts/terminator.svg' | to_static | safe }}" style="width: 16px;">&nbsp;Console</p>
        <p>~ render site/posts/{{- archive.title -}}.md</p>
        <p class="with-loading">Rendering</p>
        <p>information:</p>
        <p>created: <span id="time-transfer">{{ archive.created }}</span></p>
        <p>author: {{ site.author }}</p>
        <p>
            tags:
            {%- for tag in archive.tags -%}
            <a href="{{ tag.url | urlencode | safe }}" style="background-color: #707b7c;">{{- tag.title -}}</a>
            {%- endfor -%}
        </p>
        <p>
            categories:
            {%- for category in archive.categories -%}
            <a href="{{ category.url | urlencode | safe }}" style="background-color: #707b7c;">{{- category.title -}}</a>
            {%- endfor -%}
        </p>
        <p>Rendering finished.</p>
    </h1>
</div>
<div class="row">
    <div class="col-lg-2"></div>
    <div class="col-lg-8">
        <div class="page-header">
            <h1 class="text-center text-primary">{{- archive.title -}}</h1>
        </div>
        <div class="jumbotron">
            {{ archive.content | safe }}
            <br>
            <br>
            <br>
            <br>
            <p class="text-center">
                {%- if archive.next -%}
                <a class="resize" href="{{ archive.next.url | safe }}" target="_blank"> Next >> {{ archive.next.title }} </a>
                {%- endif -%}
                {%- if archive.next or archive.previous -%}
                |
                {%- endif -%}
                {%- if archive.previous -%}
                <a class="resize" href="{{ archive.previous.url | safe }}" target="_blank"> {{ archive.previous.title }} << Previous </a>
                {%- endif -%}
            </p>
        </div>
    </div>
</div>
<script>
    var time_elements = document.querySelectorAll("#time-transfer");
    time_elements.forEach(element => {
        element.innerHTML = new Date(element.innerHTML).toLocaleDateString(
            window.navigator.language,
            {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: 'numeric',
                minute: 'numeric'
            }
        );
    });
</script>
{%- endblock -%}