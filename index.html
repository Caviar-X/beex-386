{%- extends 'layout.html' -%}

{%- block html_head -%}
<!--仅在首页和文章页面加载语法高亮和Katex-->
<script src="https://cdn.jsdelivr.net/npm/prismjs@latest/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@latest/plugins/autoloader/prism-autoloader.min.js"></script>
{%- if theme_ctx.prism_theme -%}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism-{{- theme_ctx.prism_theme -}}.min.css">
{%- else -%}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-coy.min.css">
{%- endif -%}
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
{%- endblock -%}

{%- block main_content -%}
<div class="container">
    <h1 class="text-console">
        <p class="text-center"><img src="{{ 'static/fonts/terminator.svg' | to_static | safe }}"
                style="width: 16px;">&nbsp;Console</p>
        <p>~ cat site/desc.md</p>
        <p>Welcome!</p>
        <p>This site is created by {{ site.author }} with LOVE</p>
        <p>~ cat site/tags.md</p>
        {%- for tag in tags -%}
        <p>- <a href="{{ tag.url | urlencode | safe }}" target="_blank">{{- tag.title -}}</a></p>
        {%- endfor -%}
    </h1>
    <br>
    <br>
    <br>
    <br>
    {%- for archive in archives -%}
    <div class="row">
        <div class="col-lg-2"></div>
        <div class="col-lg-8">
            <div class="card text-white bg-primary mb-4">
                <div class="card-header">
                    <a href="{{ archive.url | urlencode | safe }}" target="_blank">{{- archive.title -}}</a>
                    {%- if archive.sticky > 0 -%}
                    <span style="background-color: red;">PIN</span>
                    {%- endif -%}
                </div>
                <div class="card-body">
                    <h4 class="card-body">
                        tags:
                        {%- for tag in archive.tags -%}
                        <a href="{{ tag.url | urlencode | safe }}" style="background-color: #707b7c;">{{- tag.title -}}</a>
                        {%- endfor -%}
                    </h4>
                    <h4 class="card-body">
                        categories:
                        {%- for category in archive.categories -%}
                        <a href="{{ category.url | urlencode | safe }}" style="background-color: #707b7c;">{{- category.title -}}</a>
                        {%- endfor -%}
                    </h4>
                    <p class="card-text">
                        {{- archive.summary | safe -}}
                    </p>
                    <a class="card-link" href="{{ archive.url | urlencode | safe }}" target="_blank">Read</a>
                    <br>
                    <br>
                    <div id="time-transfer" class="card-footer text-muted">{{- archive.created -}}</div>
                </div>
            </div>
        </div>
    </div>
    {%- endfor -%}
    <!-- transfer RFC time to human readable time -->
    <script>
        var time_elements = document.querySelectorAll("#time-transfer");
        time_elements.forEach(element => {
            element.innerHTML = new Date(element.innerHTML).toLocaleDateString(
                'zh-cn',
                {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: 'numeric',
                    minute: 'numeric'
                }
            );
        });
    </script>
</div>
{%- endblock -%}